import{r as d,u as C,j as e,X as B,B as L,V as o,a as U,c as R,b as P,d as T,e as I,A as O,D as E,T as H,f as M,g as A,h as x,i as z,P as F,k as _,l as V,m as X,n as q,o as G,p as J}from"./index-B9Fk8NBI.js";const K=({isOpen:w,setIsOpen:u})=>{const[a,y]=d.useState(!1),[h,b]=d.useState(null),[m,g]=d.useState(""),[p,j]=d.useState(),N=C(),k=s=>{var l;const r=(l=s.target.files)==null?void 0:l[0];r&&(j(r),b(URL.createObjectURL(r)))},t=async s=>{var r,l,f;s.preventDefault();try{if(!p){o.error("Select image");return}if(!m){o.error("Select name");return}y(!0);const n=new FormData;n.append("image",p),n.append("name",m);const i=await U(n);N(R((r=i==null?void 0:i.data)==null?void 0:r.data)),(l=i==null?void 0:i.data)!=null&&l.success&&o.success((f=i==null?void 0:i.data)==null?void 0:f.message),u(!1),y(!1),b(null),g(""),j(null)}catch(n){o.error(n)}};return w?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-lg dark:bg-[black]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add Category"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white",children:e.jsx(B,{size:20})})]}),e.jsxs("form",{className:"space-y-4",onSubmit:t,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category Name"}),e.jsx("input",{type:"text",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-indigo-500 focus:outline-none focus:ring dark:border-gray-600 dark:bg-gray-800 dark:text-white",placeholder:"Enter category name",value:m,onChange:s=>g(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-md file:border-0 file:bg-[#4B164C] file:px-4 file:py-2 file:text-sm file:font-semibold file:text-white hover:file:bg-[#3a123c] dark:file:bg-[#4B164C]/90 dark:hover:file:bg-[#3a123c]/90"})]}),h&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Preview:"}),e.jsx("img",{src:h,alt:"Preview",className:"w-[100px] h-auto rounded-md border dark:border-gray-700"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",className:"w-full rounded-md bg-[#4B164C] px-4 py-2 text-white text-sm font-medium hover:bg-[#3a123c] transition",children:a?e.jsx(L,{}):"Add Category"})})]})]})}):null},Q=({isOpen:w,setIsOpen:u,category:a})=>{const[y,h]=d.useState(!1),[b,m]=d.useState(null),[g,p]=d.useState(""),[j,N]=d.useState(),[k,t]=d.useState(!1),s=C(),r=f=>{var i;t(!0);const n=(i=f.target.files)==null?void 0:i[0];n&&(N(n),m(URL.createObjectURL(n)))},l=async f=>{var n,i,S,D;f.preventDefault();try{if(!k){o.error("No changes made");return}h(!0);const v=new FormData;v.append("image",j),v.append("name",g);const c=await P(a==null?void 0:a._id,v);console.log((n=c==null?void 0:c.data)==null?void 0:n.data),s(T((i=c==null?void 0:c.data)==null?void 0:i.data)),(S=c==null?void 0:c.data)!=null&&S.success&&o.success((D=c==null?void 0:c.data)==null?void 0:D.message),u(!1),h(!1)}catch(v){o.error(v)}};return d.useEffect(()=>{p(a==null?void 0:a.name)},[a]),w?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-lg dark:bg-[black]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add Category"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white",children:e.jsx(B,{size:20})})]}),e.jsxs("form",{className:"space-y-4",onSubmit:l,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category Name"}),e.jsx("input",{type:"text",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-indigo-500 focus:outline-none focus:ring dark:border-gray-600 dark:bg-gray-800 dark:text-white",placeholder:"Enter category name",value:g,onChange:f=>{p(f.target.value),t(!0)}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:r,className:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-md file:border-0 file:bg-[#4B164C] file:px-4 file:py-2 file:text-sm file:font-semibold file:text-white hover:file:bg-[#3a123c] dark:file:bg-[#4B164C]/90 dark:hover:file:bg-[#3a123c]/90"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Preview:"}),e.jsx("img",{src:b||(a==null?void 0:a.image),alt:"Preview",className:"w-[100px] h-auto rounded-md border dark:border-gray-700"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",className:"w-full rounded-md bg-[#4B164C] px-4 py-2 text-white text-sm font-medium hover:bg-[#3a123c] transition",children:y?e.jsx(L,{}):"Add Category"})})]})]})}):null};function W(){const[w,u]=d.useState(!1),[a,y]=d.useState(),h=C(),[b,m]=d.useState(!1),g=I(t=>{var s;return(s=t==null?void 0:t.category)==null?void 0:s.categories}),[p,j]=d.useState(!1),N=async t=>{var s,r;if(!t)m(!1);else try{const l=await V(a==null?void 0:a._id);h(X(a)),(s=l==null?void 0:l.data)!=null&&s.success&&o.success((r=l==null?void 0:l.data)==null?void 0:r.message),m(!1)}catch(l){o.error(l)}},k=()=>{u(!0)};return d.useEffect(()=>{(async()=>{var s;try{const r=await q();h(G((s=r==null?void 0:r.data)==null?void 0:s.data))}catch(r){o.error(r)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(O,{onClick:k,text:"Add Category"}),e.jsx(Q,{isOpen:p,setIsOpen:j,category:a}),e.jsx(E,{isDeleteModalOpen:b,handleDelete:N,text:"category"}),e.jsx(K,{isOpen:w,setIsOpen:u}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-white/[0.05] dark:bg-white/[0.03]",children:e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs(H,{children:[e.jsx(M,{className:"border-b border-gray-100 dark:border-white/[0.05]",children:e.jsxs(A,{children:[e.jsx(x,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"No"}),e.jsx(x,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Name"}),e.jsx(x,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Image"}),e.jsx(x,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"CreatedAt"}),e.jsx(x,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"UpdatedAt"}),e.jsx(x,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Actions"})]})}),e.jsx(z,{className:"divide-y divide-gray-100 dark:divide-white/[0.05]",children:g==null?void 0:g.map((t,s)=>e.jsxs(A,{children:[e.jsx(x,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:t==null?void 0:t.name}),e.jsx(x,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:s}),e.jsx(x,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:e.jsx("img",{src:t==null?void 0:t.image,className:"w-[50px] h-[50px]",alt:""})}),e.jsx(x,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:new Date(t==null?void 0:t.createdAt).toDateString()}),e.jsx(x,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:new Date(t==null?void 0:t.updatedAt).toDateString()}),e.jsx(x,{children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{j(!0),y(t)},className:"text-blue-500 hover:text-blue-700",children:e.jsx(F,{size:18})}),e.jsx("button",{onClick:()=>{m(!0),y(t)},className:"text-red-500 hover:text-red-700",children:e.jsx(_,{size:18})})]})})]},t==null?void 0:t._id))})]})})})]})}function Z(){return e.jsxs("div",{className:"w-full ",children:[e.jsx(J,{pageTitle:"Categories"}),e.jsx(W,{})]})}export{Z as default};
