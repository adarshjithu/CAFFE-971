import{r as s,u as S,j as e,X as L,B as A,af as D,V as N,ag as B,ah as P,ai as R,e as M,A as I,D as U,T as H,f as $,g as E,h as m,i as z,P as O,k as q,aj as V,ak as _,al as X,am as G,p as J}from"./index-B9Fk8NBI.js";const T=n=>{const t={};return n.name.trim()||(t.name="Name is required"),n.description.trim()||(t.description="Description is required"),n.type.trim()||(t.type="Type is required"),n!=null&&n.price||(t.price="Price is Required"),t},K=({setIsOpen:n})=>{const[t,p]=s.useState({name:"",description:"",type:"",price:""}),[f,h]=s.useState(null),[k,w]=s.useState(null),[j,v]=s.useState(!1),[r,l]=s.useState({}),C=S(),a=b=>{const{name:y,value:c}=b.target;p(x=>({...x,[y]:c}))},i=b=>{var c;const y=(c=b.target.files)==null?void 0:c[0];y&&(h(y),w(URL.createObjectURL(y)))},u=async b=>{var x,g,o;b.preventDefault();const y=T({...t});if(Object.keys(y).length>0){l(y);return}l({});const c=new FormData;c.append("name",t.name),c.append("description",t.description),c.append("type",t.type),c.append("price",t==null?void 0:t.price),f&&c.append("image",f);try{v(!0);const d=await D(c);(x=d==null?void 0:d.data)!=null&&x.success&&N.success((g=d==null?void 0:d.data)==null?void 0:g.message),C(B((o=d==null?void 0:d.data)==null?void 0:o.data)),n(!1)}catch(d){N.error(d)}finally{v(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-lg dark:bg-[black]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add Food Station"}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white",children:e.jsx(L,{size:20})})]}),e.jsxs("form",{className:"space-y-4",onSubmit:u,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:a,placeholder:"Enter name",className:`w-full rounded-md border px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring ${r.name?"border-red-500 focus:border-red-500":"border-gray-300 focus:border-indigo-500 dark:border-gray-600"} dark:bg-gray-800 dark:text-white`}),r.name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:t.description,onChange:a,placeholder:"Enter description",className:`w-full rounded-md border px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring ${r.description?"border-red-500 focus:border-red-500":"border-gray-300 focus:border-indigo-500 dark:border-gray-600"} dark:bg-gray-800 dark:text-white`}),r.description&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),e.jsx("input",{type:"text",name:"type",value:t.type,onChange:a,placeholder:"Enter type",className:`w-full rounded-md border px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring ${r.type?"border-red-500 focus:border-red-500":"border-gray-300 focus:border-indigo-500 dark:border-gray-600"} dark:bg-gray-800 dark:text-white`}),r.type&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Price"}),e.jsx("input",{type:"text",name:"price",value:t.price,onChange:a,placeholder:"Enter price",className:`w-full rounded-md border px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring ${r.type?"border-red-500 focus:border-red-500":"border-gray-300 focus:border-indigo-500 dark:border-gray-600"} dark:bg-gray-800 dark:text-white`}),r.price&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:i,className:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-md file:border-0 file:bg-[#4B164C] file:px-4 file:py-2 file:text-sm file:font-semibold file:text-white hover:file:bg-[#3a123c] dark:file:bg-[#4B164C]/90 dark:hover:file:bg-[#3a123c]/90"}),r.image&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:r.image})]}),k&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Preview:"}),e.jsx("img",{src:k,alt:"Preview",className:"w-[100px] h-auto rounded-md border dark:border-gray-700"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",className:"w-full rounded-md bg-[#4B164C] px-4 py-2 text-white text-sm font-medium hover:bg-[#3a123c] transition",children:j?e.jsx(A,{}):"Submit"})})]})]})})},Q=({setIsOpen:n,foodStation:t})=>{const[p,f]=s.useState({name:"",description:"",type:""}),[h,k]=s.useState(null),[w,j]=s.useState(null),[v,r]=s.useState(!1),[l,C]=s.useState({}),a=S(),[i,u]=s.useState(!1),b=x=>{const{name:g,value:o}=x.target;f(d=>({...d,[g]:o})),u(!0)},y=x=>{var o;const g=(o=x.target.files)==null?void 0:o[0];g&&(k(g),j(URL.createObjectURL(g))),u(!0)},c=async x=>{var d;x.preventDefault();const g=T(p);if(Object.keys(g).length>0){C(g);return}if(!i){N.error("No changes made");return}C({});const o=new FormData;o.append("name",p.name),o.append("description",p.description),o.append("type",p.type),h&&o.append("image",h);try{r(!0);const F=await P(t==null?void 0:t._id,o);a(R((d=F==null?void 0:F.data)==null?void 0:d.data)),N.success("Food Station updated successfully!"),n(!1)}catch(F){N.error(F)}finally{r(!1)}};return s.useEffect(()=>{const x={name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",type:(t==null?void 0:t.type)||""};f(x),j((t==null?void 0:t.image)||null),u(!1)},[t]),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-lg dark:bg-[black]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Edit Food Station"}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white",children:e.jsx(L,{size:20})})]}),e.jsxs("form",{className:"space-y-4",onSubmit:c,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:p.name,onChange:b,placeholder:"Enter name",className:`w-full rounded-md border px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring ${l.name?"border-red-500 focus:border-red-500":"border-gray-300 focus:border-indigo-500 dark:border-gray-600"} dark:bg-gray-800 dark:text-white`}),l.name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:p.description,onChange:b,placeholder:"Enter description",className:`w-full rounded-md border px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring ${l.description?"border-red-500 focus:border-red-500":"border-gray-300 focus:border-indigo-500 dark:border-gray-600"} dark:bg-gray-800 dark:text-white`}),l.description&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),e.jsx("input",{type:"text",name:"type",value:p.type,onChange:b,placeholder:"Enter type",className:`w-full rounded-md border px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring ${l.type?"border-red-500 focus:border-red-500":"border-gray-300 focus:border-indigo-500 dark:border-gray-600"} dark:bg-gray-800 dark:text-white`}),l.type&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Change Image (optional)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-md file:border-0 file:bg-[#4B164C] file:px-4 file:py-2 file:text-sm file:font-semibold file:text-white hover:file:bg-[#3a123c] dark:file:bg-[#4B164C]/90 dark:hover:file:bg-[#3a123c]/90"})]}),w&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Preview:"}),e.jsx("img",{src:w,alt:"Preview",className:"w-[100px] h-auto rounded-md border dark:border-gray-700"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",className:"w-full rounded-md bg-[#4B164C] px-4 py-2 text-white text-sm font-medium hover:bg-[#3a123c] transition",children:v?e.jsx(A,{}):"Update"})})]})]})})};function W(){const[n,t]=s.useState(!1),p=M(a=>{var i;return(i=a==null?void 0:a.foodStation)==null?void 0:i.foodStations}),f=S(),[h,k]=s.useState(),[w,j]=s.useState(!1),[v,r]=s.useState(!1),l=async a=>{if(!a)j(!1);else try{const i=await V(h==null?void 0:h._id);f(_(h)),j(!1)}catch(i){N.error(i)}},C=()=>{t(!0)};return s.useEffect(()=>{(async()=>{var i;try{const u=await X();f(G((i=u==null?void 0:u.data)==null?void 0:i.data))}catch(u){N.error(u)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(I,{onClick:C,text:"Add New Foodstation"}),v&&e.jsx(Q,{setIsOpen:r,foodStation:h}),n&&e.jsx(K,{setIsOpen:t}),e.jsx(U,{handleDelete:l,isDeleteModalOpen:w,text:"Live Foood Station"}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-white/[0.05] dark:bg-white/[0.03]",children:e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs(H,{children:[e.jsx($,{className:"border-b border-gray-100 dark:border-white/[0.05]",children:e.jsxs(E,{children:[e.jsx(m,{isHeader:!0,className:"px-5 py-3 font-medium text-start text-theme-xs text-gray-500 dark:text-gray-400",children:"No"}),e.jsx(m,{isHeader:!0,className:"px-5 py-3 font-medium text-start text-theme-xs text-gray-500 dark:text-gray-400",children:"Name"}),e.jsx(m,{isHeader:!0,className:"px-5 py-3 font-medium text-start text-theme-xs text-gray-500 dark:text-gray-400",children:"Image"}),e.jsx(m,{isHeader:!0,className:"px-5 py-3 font-medium text-start text-theme-xs text-gray-500 dark:text-gray-400",children:"Type"}),e.jsx(m,{isHeader:!0,className:"px-5 py-3 font-medium text-start text-theme-xs text-gray-500 dark:text-gray-400",children:"Description"}),e.jsx(m,{isHeader:!0,className:"px-5 py-3 font-medium text-start text-theme-xs text-gray-500 dark:text-gray-400",children:"Actions"})]})}),e.jsx(z,{className:"divide-y divide-gray-100 dark:divide-white/[0.05]",children:p.map((a,i)=>e.jsxs(E,{children:[e.jsx(m,{className:"px-4 py-3 text-start text-theme-sm text-gray-500 dark:text-gray-400",children:i+1}),e.jsx(m,{className:"px-4 py-3 text-start text-theme-sm text-gray-500 dark:text-gray-400",children:a.name}),e.jsx(m,{className:"px-4 py-3 text-start",children:e.jsx("img",{src:a.image,alt:a.name,className:"w-[50px] h-[50px] rounded-md object-cover"})}),e.jsx(m,{className:"px-4 py-3 text-start text-theme-sm text-gray-500 dark:text-gray-400",children:a.type}),e.jsx(m,{className:"px-4 py-3 text-start text-theme-sm text-gray-500 dark:text-gray-400",children:a.description}),e.jsx(m,{children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{k(a),r(!0)},className:"text-blue-500 hover:text-blue-700",children:e.jsx(O,{size:18})}),e.jsx("button",{onClick:()=>{k(a),j(!0)},className:"text-red-500 hover:text-red-700",children:e.jsx(q,{size:18})})]})})]},i))})]})})})]})}function Z(){return e.jsxs("div",{className:"w-full",children:[e.jsx(J,{pageTitle:"Live Food Station"}),e.jsx(W,{})]})}export{Z as default};
