import{r as i,u as k,j as e,X as S,B as A,$ as D,a0 as B,V as o,a1 as L,a2 as M,e as R,A as E,D as P,T,f as I,g as C,h as c,i as U,P as z,k as H,a3 as F,a4 as O,a5 as _,a6 as V,p as $}from"./index-B9Fk8NBI.js";const X=({setIsOpen:f})=>{const[l,b]=i.useState(""),[x,m]=i.useState(null),[p,h]=i.useState(null),[y,u]=i.useState(!1),g=k(),N=t=>{var d;const s=(d=t.target.files)==null?void 0:d[0];s&&(m(s),h(URL.createObjectURL(s)))},w=async t=>{var d,n,a;t.preventDefault();const s=new FormData;s.append("name",l),s.append("image",x||"");try{u(!0);const r=await D(s);g(B((d=r==null?void 0:r.data)==null?void 0:d.data)),(n=r==null?void 0:r.data)!=null&&n.success&&o.success((a=r==null?void 0:r.data)==null?void 0:a.message),u(!1)}catch(r){o.error(r),u(!1)}f(!1)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-lg dark:bg-black",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add Chair"}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white",children:e.jsx(S,{size:20})})]}),e.jsxs("form",{className:"space-y-4",onSubmit:w,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:l,onChange:t=>b(t.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-indigo-500 focus:outline-none focus:ring dark:border-gray-600 dark:bg-gray-800 dark:text-white",placeholder:"Enter chair name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-md file:border-0 file:bg-[#4B164C] file:px-4 file:py-2 file:text-sm file:font-semibold file:text-white hover:file:bg-[#3a123c] dark:file:bg-[#4B164C]/90 dark:hover:file:bg-[#3a123c]/90"})]}),p&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Preview:"}),e.jsx("img",{src:p,alt:"Preview",className:"w-[100px] h-auto rounded-md border dark:border-gray-700"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",className:"w-full rounded-md bg-[#4B164C] px-4 py-2 text-white text-sm font-medium hover:bg-[#3a123c] transition",children:y?e.jsx(A,{}):"Submit"})})]})]})})},q=({setIsOpen:f,chair:l})=>{const[b,x]=i.useState(""),[m,p]=i.useState(null),[h,y]=i.useState(null),[u,g]=i.useState(!1),N=k(),[w,t]=i.useState(!1),s=n=>{var r;g(!0);const a=(r=n.target.files)==null?void 0:r[0];a&&(p(a),y(URL.createObjectURL(a)))},d=async n=>{var a,r;if(n.preventDefault(),!u){o.error("No changes made");return}if(!m&&!b){o.error("Empty Data");return}try{t(!0);const v=new FormData;m&&v.append("image",m||""),v.append("name",b);const j=await L(l==null?void 0:l._id,v);N(M((a=j==null?void 0:j.data)==null?void 0:a.data)),o.success((r=j==null?void 0:j.data)==null?void 0:r.message),t(!1),f(!1)}catch(v){o.error(v),t(!1)}};return i.useEffect(()=>{x((l==null?void 0:l.name)||""),y((l==null?void 0:l.image)||""),g(!1)},[]),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-lg dark:bg-black",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add Chair"}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white",children:e.jsx(S,{size:20})})]}),e.jsxs("form",{className:"space-y-4",onSubmit:d,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:b,onChange:n=>{x(n.target.value),g(!0)},className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-indigo-500 focus:outline-none focus:ring dark:border-gray-600 dark:bg-gray-800 dark:text-white",placeholder:"Enter chair name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s,className:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-md file:border-0 file:bg-[#4B164C] file:px-4 file:py-2 file:text-sm file:font-semibold file:text-white hover:file:bg-[#3a123c] dark:file:bg-[#4B164C]/90 dark:hover:file:bg-[#3a123c]/90"})]}),h&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Preview:"}),e.jsx("img",{src:h,alt:"Preview",className:"w-[100px] h-auto rounded-md border dark:border-gray-700"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",className:"w-full rounded-md bg-[#4B164C] px-4 py-2 text-white text-sm font-medium hover:bg-[#3a123c] transition",children:w?e.jsx(A,{}):"Submit"})})]})]})})};function G(){const[f,l]=i.useState(!1),b=R(t=>{var s;return(s=t==null?void 0:t.chair)==null?void 0:s.chairs}),[x,m]=i.useState(),[p,h]=i.useState(!1),[y,u]=i.useState(!1),g=k(),N=()=>{l(!0)},w=async t=>{var s,d,n;if(!t)h(!1);else try{const a=await F(x==null?void 0:x._id);g(O((s=a==null?void 0:a.data)==null?void 0:s.data)),(d=a==null?void 0:a.data)!=null&&d.success&&o.success((n=a==null?void 0:a.data)==null?void 0:n.message),h(!1)}catch(a){o.error(a)}};return i.useEffect(()=>{(async()=>{var s;try{const d=await _();g(V((s=d==null?void 0:d.data)==null?void 0:s.data))}catch(d){o.error(d)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(E,{text:"Add New Chair",onClick:N}),y&&e.jsx(q,{setIsOpen:u,chair:x}),f&&e.jsx(X,{setIsOpen:l}),e.jsx(P,{text:"Chair",handleDelete:w,isDeleteModalOpen:p}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-white/[0.05] dark:bg-white/[0.03]",children:e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs(T,{children:[e.jsx(I,{className:"border-b border-gray-100 dark:border-white/[0.05]",children:e.jsxs(C,{children:[e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"No"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Chair Name"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Image"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Status"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Actions"})]})}),e.jsx(U,{className:"divide-y divide-gray-100 dark:divide-white/[0.05]",children:b.map((t,s)=>e.jsxs(C,{children:[e.jsx(c,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:s+1}),e.jsx(c,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:t.name}),e.jsx(c,{className:"px-4 py-3 text-start",children:e.jsx("img",{src:t.image,alt:t.name,className:"w-[50px] h-[50px] rounded-md object-cover"})}),e.jsx(c,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm ${t.isActive?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:t.isActive?"Active":"Inactive"})}),e.jsx(c,{children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{m(t),u(!0)},className:"text-blue-500 hover:text-blue-700",children:e.jsx(z,{size:18})}),e.jsx("button",{onClick:()=>{m(t),h(!0)},className:"text-red-500 hover:text-red-700",children:e.jsx(H,{size:18})})]})})]},t._id))})]})})})]})}function K(){return e.jsxs("div",{className:"w-full",children:[e.jsx($,{pageTitle:"Chairs"}),e.jsx(G,{})]})}export{K as default};
