import{r as x,u as E,j as e,X as H,B as R,a7 as L,a8 as U,V as v,a9 as M,aa as B,e as z,A as F,D as I,T as O,f as P,g as q,h as c,i as W,P as D,k as V,ab as _,ac as X,ad as G,ae as J,p as K}from"./index-B9Fk8NBI.js";const Q=({setIsOpen:C})=>{const[t,a]=x.useState({name:"",image:null,width:"",height:"",length:"",chairCount:"",rate:""}),p=E(),[h,y]=x.useState({}),[f,j]=x.useState(""),[u,k]=x.useState(!1),S=()=>{const r={};return t.name.trim()||(r.name="Name is required."),t.width.trim()||(r.width="Width is required."),t.height.trim()||(r.height="Height is required."),t.length.trim()||(r.length="Length is required."),!t.chairCount&&t.chairCount!==0&&(r.chairCount="Chair count is required."),!t.rate&&t.rate!==0&&(r.rate="Rate is required."),y(r),Object.keys(r).length===0},N=r=>{const{name:l,value:d,type:g,files:m}=r.target;if(g==="file"){const i=(m==null?void 0:m[0])||null;if(a(w=>({...w,image:i})),i){const w=URL.createObjectURL(i);j(w)}else j("")}else a(g==="number"?i=>({...i,[l]:d===""?"":Number(d)}):i=>({...i,[l]:d}))},s=async r=>{var d,g;if(r.preventDefault(),!S())return;const l=new FormData;l.append("name",t.name),t.image&&l.append("image",t.image),l.append("width",t.width),l.append("height",t.height),l.append("length",t.length),l.append("chairCount",String(t.chairCount)),l.append("rate",String(t.rate)),l==null||l.append("image",(t==null?void 0:t.image)||"");try{k(!0);const m=await L(t);p(U((d=m==null?void 0:m.data)==null?void 0:d.data)),v.success((g=m==null?void 0:m.data)==null?void 0:g.message),C(!1),k(!1)}catch(m){v.error(m),k(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-lg dark:bg-[black]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add Table"}),e.jsx("button",{onClick:()=>C(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white",children:e.jsx(H,{size:20})})]}),e.jsxs("form",{onSubmit:s,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:N,placeholder:"Enter chair name",className:"w-full rounded-md border px-3 py-2 text-sm shadow-sm dark:bg-gray-800 dark:text-white"}),h.name&&e.jsx("p",{className:"text-sm text-red-500",children:h.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Image (Optional)"}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:N,className:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-md file:border-0 file:bg-[#4B164C] file:px-4 file:py-2 file:text-sm file:font-semibold file:text-white hover:file:bg-[#3a123c]"}),f&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:f,alt:"Preview",className:"h-40 w-full object-contain rounded-md border dark:border-gray-600"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Size"}),e.jsx("div",{className:"flex gap-2",children:["width","height","length"].map(r=>e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",name:r,value:t[r],onChange:N,placeholder:r.charAt(0).toUpperCase()+r.slice(1),className:"w-full rounded-md border px-3 py-2 text-sm shadow-sm dark:bg-gray-800 dark:text-white"}),h[r]&&e.jsx("p",{className:"text-sm text-red-500",children:h[r]})]},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Chair Count"}),e.jsx("input",{type:"number",name:"chairCount",value:t.chairCount,onChange:N,placeholder:"Enter chair count",className:"w-full rounded-md border px-3 py-2 text-sm shadow-sm dark:bg-gray-800 dark:text-white"}),h.chairCount&&e.jsx("p",{className:"text-sm text-red-500",children:h.chairCount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rate (₹)"}),e.jsx("input",{type:"number",name:"rate",value:t.rate,onChange:N,placeholder:"Enter price",className:"w-full rounded-md border px-3 py-2 text-sm shadow-sm dark:bg-gray-800 dark:text-white"}),h.rate&&e.jsx("p",{className:"text-sm text-red-500",children:h.rate})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",className:"w-full rounded-md bg-[#4B164C] px-4 py-2 text-white text-sm font-medium hover:bg-[#3a123c] transition",children:u?e.jsx(R,{}):"Submit"})})]})]})})},Y=({setTableEditModal:C,table:t})=>{const[a,p]=x.useState({name:"",image:null,width:"",height:"",length:"",chairCount:"",rate:""}),[h,y]=x.useState(""),[f,j]=x.useState(!1),[u,k]=x.useState({}),S=E(),[N,s]=x.useState(!1),[r,l]=x.useState(null),d=()=>{const i={};return a.name.trim()||(i.name="Name is required."),a.width.trim()||(i.width="Width is required."),a.height.trim()||(i.height="Height is required."),a.length.trim()||(i.length="Length is required."),!a.chairCount&&a.chairCount!==0&&(i.chairCount="Chair count is required."),!a.rate&&a.rate!==0&&(i.rate="Rate is required."),k(i),Object.keys(i).length===0},g=i=>{j(!0);const{name:w,value:T,type:n,files:o}=i.target;if(n==="file"){const b=(o==null?void 0:o[0])||null;if(p(A=>({...A,image:b})),l(b),b){const A=URL.createObjectURL(b);y(A)}else y("")}else p(n==="number"?b=>({...b,[w]:T===""?"":Number(T)}):b=>({...b,[w]:T}))},m=async i=>{var w,T;if(i.preventDefault(),!f){v.error("No changes made");return}if(d())try{const n=new FormData;n==null||n.append("name",a==null?void 0:a.name),n==null||n.append("width",a==null?void 0:a.width),n==null||n.append("height",a==null?void 0:a.height),n==null||n.append("length",a==null?void 0:a.length),n==null||n.append("chairCount",a==null?void 0:a.chairCount),n==null||n.append("rate",a==null?void 0:a.rate),r&&(n==null||n.append("image",a==null?void 0:a.image)),s(!0);const o=await M(t==null?void 0:t._id,n);S(B((w=o==null?void 0:o.data)==null?void 0:w.data)),C(!1),s(!1),v.success((T=o==null?void 0:o.data)==null?void 0:T.message)}catch(n){s(!1),v.error(n)}};return x.useEffect(()=>{const i={name:t==null?void 0:t.name,image:t==null?void 0:t.image,width:t==null?void 0:t.width,height:t==null?void 0:t.height,length:t==null?void 0:t.length,chairCount:t==null?void 0:t.chairCount,rate:t==null?void 0:t.length};y(t==null?void 0:t.image),p(i),j(!1)},[t]),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",children:e.jsxs("div",{className:"bg-white dark:bg-[black] w-full max-w-md rounded-lg shadow-lg p-6 relative overflow-y-auto max-h-[90vh]",children:[e.jsx("button",{className:"absolute top-3 right-3 text-gray-500 hover:text-gray-800 dark:hover:text-white",onClick:()=>C(!1),children:e.jsx(H,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Edit Table Info"}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:g,className:"w-full px-3 py-2 border rounded dark:bg-gray-800 dark:text-white"}),u.name&&e.jsx("p",{className:"text-sm text-red-500",children:u.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300",children:"Image"}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:g,className:"w-full text-sm text-gray-500"}),h&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:h,alt:"Preview",className:"h-40 w-full object-contain rounded-md border dark:border-gray-600"})})]}),e.jsx("div",{className:"flex gap-2",children:["width","height","length"].map(i=>e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",name:i,value:a[i],onChange:g,placeholder:i.charAt(0).toUpperCase()+i.slice(1),className:"w-full px-3 py-2 border rounded dark:bg-gray-800 dark:text-white"}),u[i]&&e.jsx("p",{className:"text-sm text-red-500",children:u[i]})]},i))}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300",children:"Chair Count"}),e.jsx("input",{type:"number",name:"chairCount",value:a.chairCount,onChange:g,className:"w-full px-3 py-2 border rounded dark:bg-gray-800 dark:text-white"}),u.chairCount&&e.jsx("p",{className:"text-sm text-red-500",children:u.chairCount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300",children:"Rate (₹)"}),e.jsx("input",{type:"number",name:"rate",value:a.rate,onChange:g,className:"w-full px-3 py-2 border rounded dark:bg-gray-800 dark:text-white"}),u.rate&&e.jsx("p",{className:"text-sm text-red-500",children:u.rate})]}),e.jsx("button",{type:"submit",className:"w-full bg-[#4B164C] text-white py-2 rounded hover:bg-[#3a123c]",children:N?e.jsx(R,{}):" Save Changes"})]})]})})};function Z(){const[C,t]=x.useState(!1),a=z(s=>{var r;return(r=s==null?void 0:s.table)==null?void 0:r.tables}),p=E(),[h,y]=x.useState(!1),[f,j]=x.useState(),[u,k]=x.useState(!1),S=()=>{t(!0)},N=async s=>{var r,l;if(!s)y(!1);else try{const d=await _(f==null?void 0:f._id);p(X((r=d==null?void 0:d.data)==null?void 0:r.data)),y(!1),v.success((l=d==null?void 0:d.data)==null?void 0:l.message)}catch(d){v.error(d)}};return x.useEffect(()=>{(async()=>{var r;try{const l=await G();p(J((r=l==null?void 0:l.data)==null?void 0:r.data))}catch(l){v.error(l)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(F,{text:"Add New Table",onClick:S}),u&&e.jsx(Y,{setTableEditModal:k,table:f}),e.jsxs("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-white/[0.05] dark:bg-white/[0.03]",children:[h&&e.jsx(I,{isDeleteModalOpen:h,text:"Table",handleDelete:N}),C&&e.jsx(Q,{setIsOpen:t}),e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs(O,{children:[e.jsx(P,{className:"border-b border-gray-100 dark:border-white/[0.05]",children:e.jsxs(q,{children:[e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-start text-theme-xs text-gray-500 dark:text-gray-400",children:"No"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-start text-theme-xs text-gray-500 dark:text-gray-400",children:"Table Name"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-start text-theme-xs text-gray-500 dark:text-gray-400",children:"Image"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-start text-theme-xs text-gray-500 dark:text-gray-400",children:"Rate"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-start text-theme-xs text-gray-500 dark:text-gray-400",children:"Number of Chairs"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-start text-theme-xs text-gray-500 dark:text-gray-400",children:"Size (cm)"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-start text-theme-xs text-gray-500 dark:text-gray-400",children:"CreatedAt"}),e.jsx(c,{isHeader:!0,className:"px-5 py-3 font-medium text-start text-theme-xs text-gray-500 dark:text-gray-400",children:"Actions"})]})}),e.jsx(W,{className:"divide-y divide-gray-100 dark:divide-white/[0.05]",children:a.map((s,r)=>e.jsxs(q,{children:[e.jsx(c,{className:"px-4 py-3 text-start text-theme-sm text-gray-500 dark:text-gray-400",children:r+1}),e.jsx(c,{className:"px-4 py-3 text-start text-theme-sm text-gray-500 dark:text-gray-400",children:s.name}),e.jsx(c,{className:"px-4 py-3 text-start",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-[50px] h-[50px] rounded-md object-cover"})}),e.jsx(c,{className:"px-4 py-3 text-start text-theme-sm text-gray-500 dark:text-gray-400",children:s==null?void 0:s.rate}),e.jsx(c,{className:"px-4 py-3 text-start text-theme-sm text-gray-500 dark:text-gray-400",children:s==null?void 0:s.chairCount}),e.jsxs(c,{className:"px-4 py-3 text-start text-theme-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Width : ",s==null?void 0:s.width]}),e.jsx("br",{}),e.jsxs("span",{children:["Height : ",s==null?void 0:s.height]}),e.jsx("br",{}),e.jsxs("span",{children:["Length : ",s==null?void 0:s.length]})]}),e.jsx(c,{className:"px-4 py-3 text-start text-theme-sm text-gray-500 dark:text-gray-400",children:new Date(s==null?void 0:s.createdAt).toDateString()}),e.jsx(c,{children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{j(s),k(!0)},className:"text-blue-500 hover:text-blue-700",children:e.jsx(D,{size:18})}),e.jsx("button",{onClick:()=>{j(s),y(!0)},className:"text-red-500 hover:text-red-700",children:e.jsx(V,{size:18})})]})})]},r))})]})})]})]})}function ee(){return e.jsxs("div",{className:"w-full",children:[e.jsx(K,{pageTitle:"Tables"}),e.jsx(Z,{})]})}export{ee as default};
