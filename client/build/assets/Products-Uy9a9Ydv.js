import{r as s,u as E,j as e,X as M,B as O,n as R,V as h,q as z,s as U,t as F,e as q,A as X,D as $,T as G,f as J,g as H,h as o,i as K,P as Q,k as W,v as Y,w as Z,x as D,y as ee,z as te,C as ae,p as re}from"./index-B9Fk8NBI.js";const se=({isOpen:b,setIsOpen:r})=>{const[g,u]=s.useState(!1),[n,w]=s.useState(null),[t,C]=s.useState({name:"",category:"",type:"nonVeg"}),[f,v]=s.useState([]),[k,A]=s.useState(),S=E(),B=l=>{var m;const x=(m=l.target.files)==null?void 0:m[0];x&&(A(x),w(URL.createObjectURL(x)))},c=async l=>{var x,m;l.preventDefault();try{if(!(t!=null&&t.name)){h.error("Name required");return}if(!(t!=null&&t.category)){h.error("Category required");return}if(!k){h.error("Image required");return}const d=new FormData;d.append("name",t==null?void 0:t.name),d.append("category",t==null?void 0:t.category),d.append("image",k),d.append("type",t==null?void 0:t.type),u(!0);const i=await z(d);S(U((x=i==null?void 0:i.data)==null?void 0:x.data)),h.success((m=i==null?void 0:i.data)==null?void 0:m.message),u(!1),r(!1)}catch(d){u(!1),h.error(d)}},y=l=>{C({...t,[l.target.name]:l.target.value})};return s.useEffect(()=>{(async()=>{var m;const x=await R();v((m=x==null?void 0:x.data)==null?void 0:m.data)})()},[]),b?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-lg dark:bg-[black]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add Product"}),e.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white",children:e.jsx(M,{size:20})})]}),e.jsxs("form",{className:"space-y-4",onSubmit:c,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" Name"}),e.jsx("input",{name:"name",onChange:y,value:t==null?void 0:t.name,type:"text",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-indigo-500 focus:outline-none focus:ring dark:border-gray-600 dark:bg-gray-800 dark:text-white",placeholder:"Enter category name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsxs("select",{onChange:y,value:t==null?void 0:t.category,name:"category",className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-black dark:bg-gray-800 dark:text-white dark:border-gray-600",children:[e.jsx("option",{value:"",disabled:!0,selected:!0,className:"text-gray-500 dark:text-gray-400",children:"Select Category"}),f==null?void 0:f.map((l,x)=>e.jsx("option",{value:l==null?void 0:l._id,className:"text-black dark:text-white",children:l.name},x))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",name:"type",checked:(t==null?void 0:t.type)=="veg",onChange:y,value:"veg",className:"form-checkbox h-4 w-4 text-green-600 dark:bg-gray-800 dark:border-gray-600"}),e.jsx("span",{children:"Veg"})]}),e.jsxs("label",{className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300",children:[e.jsx("input",{name:"type",checked:(t==null?void 0:t.type)=="nonVeg",type:"checkbox",onChange:y,value:"nonVeg",className:"form-checkbox h-4 w-4 text-red-600 dark:bg-gray-800 dark:border-gray-600"}),e.jsx("span",{children:"Non-Veg"})]}),e.jsxs("label",{className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300",children:[e.jsx("input",{name:"type",checked:(t==null?void 0:t.type)=="none",type:"checkbox",onChange:y,value:"none",className:"form-checkbox h-4 w-4 text-red-600 dark:bg-gray-800 dark:border-gray-600"}),e.jsx("span",{children:"None"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:B,className:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-md file:border-0 file:bg-[#4B164C] file:px-4 file:py-2 file:text-sm file:font-semibold file:text-white hover:file:bg-[#3a123c] dark:file:bg-[#4B164C]/90 dark:hover:file:bg-[#3a123c]/90"})]}),n&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Preview:"}),e.jsx("img",{src:n,alt:"Preview",className:"w-[100px] h-auto rounded-md border dark:border-gray-700"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",className:"w-full rounded-md bg-[#4B164C] px-4 py-2 text-white text-sm font-medium hover:bg-[#3a123c] transition",children:g?e.jsx(O,{}):"Submit"})})]})]})}):null},le=({setIsOpen:b,category:r})=>{var m;const[g,u]=s.useState(!1),[n,w]=s.useState(r==null?void 0:r.image),[t,C]=s.useState({name:r==null?void 0:r.name,category:(m=r==null?void 0:r.category)==null?void 0:m._id,type:r==null?void 0:r.type}),[f,v]=s.useState([]),[k,A]=s.useState(),S=E(),[B,c]=s.useState(!1),y=d=>{var N;const i=(N=d.target.files)==null?void 0:N[0];i&&(A(i),w(URL.createObjectURL(i))),c(!0)},l=async d=>{var i,N,L;d.preventDefault();try{if(!B){h.error("No changed made");return}const P=new FormData;P.append("name",t==null?void 0:t.name),P.append("category",(t==null?void 0:t.category)||((i=r==null?void 0:r.category)==null?void 0:i._id)),k&&P.append("image",k),P.append("type",t==null?void 0:t.type),u(!0);const T=await F(P,r==null?void 0:r._id);S(U((N=T==null?void 0:T.data)==null?void 0:N.data)),h.success((L=T==null?void 0:T.data)==null?void 0:L.message),u(!1),b(!1),c(!1)}catch(P){u(!1),h.error(P)}},x=d=>{c(!0),C({...t,[d.target.name]:d.target.value})};return s.useEffect(()=>{(async()=>{var N;const i=await R();v((N=i==null?void 0:i.data)==null?void 0:N.data)})()},[]),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-lg dark:bg-[black]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add Product"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white",children:e.jsx(M,{size:20})})]}),e.jsxs("form",{className:"space-y-4",onSubmit:l,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" Name"}),e.jsx("input",{name:"name",onChange:x,value:t==null?void 0:t.name,type:"text",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-indigo-500 focus:outline-none focus:ring dark:border-gray-600 dark:bg-gray-800 dark:text-white",placeholder:"Enter category name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsxs("select",{onChange:x,value:t==null?void 0:t.category,name:"category",className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-black dark:bg-gray-800 dark:text-white dark:border-gray-600",children:[e.jsx("option",{value:"",disabled:!0,selected:!0,className:"text-gray-500 dark:text-gray-400",children:"Select Category"}),f==null?void 0:f.map((d,i)=>e.jsx("option",{value:d==null?void 0:d._id,className:"text-black dark:text-white",children:d.name},i))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",name:"type",checked:(t==null?void 0:t.type)=="veg",onChange:x,value:"veg",className:"form-checkbox h-4 w-4 text-green-600 dark:bg-gray-800 dark:border-gray-600"}),e.jsx("span",{children:"Veg"})]}),e.jsxs("label",{className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300",children:[e.jsx("input",{name:"type",checked:(t==null?void 0:t.type)=="nonVeg",type:"checkbox",onChange:x,value:"nonVeg",className:"form-checkbox h-4 w-4 text-red-600 dark:bg-gray-800 dark:border-gray-600"}),e.jsx("span",{children:"Non-Veg"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-md file:border-0 file:bg-[#4B164C] file:px-4 file:py-2 file:text-sm file:font-semibold file:text-white hover:file:bg-[#3a123c] dark:file:bg-[#4B164C]/90 dark:hover:file:bg-[#3a123c]/90"})]}),n&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Preview:"}),e.jsx("img",{src:n,alt:"Preview",className:"w-[100px] h-auto rounded-md border dark:border-gray-700"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",className:"w-full rounded-md bg-[#4B164C] px-4 py-2 text-white text-sm font-medium hover:bg-[#3a123c] transition",children:g?e.jsx(O,{}):"Submit"})})]})]})})},de=({search:b,setSearch:r,isActive:g,setIsActive:u,categoryName:n,setCategoryName:w,type:t,setType:C,setPage:f})=>{const[v,k]=s.useState([]),[A,S]=s.useState(null);s.useEffect(()=>{(async()=>{var y;try{const l=await R();k((y=l==null?void 0:l.data)==null?void 0:y.data)}catch(l){h.error(l)}})()},[]);const B=c=>{const y=c.target.value;A&&clearTimeout(A);const l=setTimeout(()=>{f(1),r(y)},500);S(l)};return e.jsxs("div",{className:"mb-4 bg-white dark:bg-gray-800 shadow rounded-xl p-4 flex flex-col gap-4 md:flex-row",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Search"}),e.jsx("input",{type:"text",defaultValue:b,onChange:B,placeholder:"Search products...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Status"}),e.jsxs("select",{value:g,onChange:c=>u(c.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"disabled",children:"Disabled"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Type"}),e.jsxs("select",{onChange:c=>C(c.target.value),value:t,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"veg",children:"Veg"}),e.jsx("option",{value:"nonVeg",children:"Non-Veg"}),e.jsx("option",{value:"none",children:"Other"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Categories"}),e.jsxs("select",{value:n,onChange:c=>w(c.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"All"}),v==null?void 0:v.map(c=>e.jsx("option",{value:c.name,children:c.name},c._id))]})]})]})};function ne({pageCount:b,setPage:r,page:g}){const u=Array.from({length:Math.ceil(b/10)},(n,w)=>w+1);return e.jsx("nav",{"aria-label":"Page navigation example",className:"flex flex-col gap-4 mt-4 justify-center items-center",children:e.jsxs("ul",{className:"inline-flex -space-x-px text-base h-10",children:[e.jsx("li",{children:e.jsx("a",{onClick:()=>{g!==1?r(n=>n+-1):h.error("Invalid page")},className:" cursor-pointer flex items-center justify-center px-4 h-10 ms-0 leading-tight text-gray-500 bg-white border border-e-0 border-gray-300 rounded-s-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:"Previous"})}),u.map(n=>e.jsx("li",{children:e.jsx("a",{onClick:()=>r(n),className:`flex items-center justify-center px-4 h-10 leading-tight border ${n===g?"text-blue-600 border-gray-300 bg-blue-50 hover:bg-blue-100 hover:text-blue-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white":"text-gray-500 bg-white border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"}`,"aria-current":n===1?"page":void 0,children:n})},n)),e.jsx("li",{children:e.jsx("a",{onClick:()=>{g*10>=b?h.error("Invalid page"):r(n=>n+1)},className:"flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-gray-300 rounded-e-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:"Next"})})]})})}function ce(){const[b,r]=s.useState(!1),[g,u]=s.useState(),n=E(),[w,t]=s.useState(!1),C=q(a=>{var p;return(p=a==null?void 0:a.product)==null?void 0:p.products}),[f,v]=s.useState(!1),[k,A]=s.useState(""),[S,B]=s.useState("all"),[c,y]=s.useState("all"),[l,x]=s.useState("all"),[m,d]=s.useState(1),[i,N]=s.useState(0),L=async a=>{var p,V;if(!a)t(!1);else try{const j=await Y(g==null?void 0:g._id);n(Z(g)),(p=j==null?void 0:j.data)!=null&&p.success&&h.success((V=j==null?void 0:j.data)==null?void 0:V.message),t(!1)}catch(j){h.error(j)}},P=()=>{r(!0)},T=async a=>{try{const p=await D(a==null?void 0:a._id);n(ee(a))}catch(p){h.error(p)}};return s.useEffect(()=>{(async()=>{var p,V,j,_;try{const I=await te({search:k,isActive:S,type:c,categoryName:l},m);n(ae((V=(p=I==null?void 0:I.data)==null?void 0:p.data)==null?void 0:V.products)),N((_=(j=I==null?void 0:I.data)==null?void 0:j.data)==null?void 0:_.count)}catch(I){h.error(I)}})()},[k,c,S,l,m]),e.jsxs(e.Fragment,{children:[e.jsx(X,{onClick:P,text:"Add Product"}),e.jsx(de,{search:k,setSearch:A,type:c,setType:y,categoryName:l,setCategoryName:x,isActive:S,setIsActive:B,setPage:d}),b&&e.jsx(se,{isOpen:b,setIsOpen:r}),e.jsx($,{isDeleteModalOpen:w,handleDelete:L,text:"product"}),f&&e.jsx(le,{category:g,setIsOpen:v}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-white/[0.05] dark:bg-white/[0.03]",children:e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs(G,{children:[e.jsx(J,{className:"border-b border-gray-100 dark:border-white/[0.05]",children:e.jsxs(H,{children:[e.jsx(o,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"No"}),e.jsx(o,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Product Name"}),e.jsx(o,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Type"}),e.jsx(o,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Category"}),e.jsx(o,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Image"}),e.jsx(o,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Status"}),e.jsx(o,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Created At"}),e.jsx(o,{isHeader:!0,className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Actions"})]})}),e.jsx(K,{className:"divide-y divide-gray-100 dark:divide-white/[0.05]",children:C==null?void 0:C.map((a,p)=>{var V;return e.jsxs(H,{children:[e.jsx(o,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:p}),e.jsx(o,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:a==null?void 0:a.name}),e.jsx(o,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:a==null?void 0:a.type}),e.jsx(o,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:(V=a==null?void 0:a.category)==null?void 0:V.name}),e.jsx(o,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:e.jsx("img",{src:a==null?void 0:a.image,className:"w-[50px] h-[50px]",alt:""})}),e.jsx(o,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:e.jsxs("select",{onChange:()=>T(a),value:a!=null&&a.isActive?"active":"disabled",name:"",id:"",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"disabled",children:"Disabled"})]})}),e.jsx(o,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:new Date(a==null?void 0:a.createdAt).toDateString()}),e.jsx(o,{children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{v(!0),u(a)},className:"text-blue-500 hover:text-blue-700",children:e.jsx(Q,{size:18})}),e.jsx("button",{onClick:()=>{t(!0),u(a)},className:"text-red-500 hover:text-red-700",children:e.jsx(W,{size:18})})]})})]},a==null?void 0:a._id)})})]})})}),e.jsx(ne,{pageCount:i,setPage:d,page:m})]})}function xe(){return e.jsxs("div",{className:"w-full",children:[e.jsx(re,{pageTitle:"Products"}),e.jsx(ce,{})]})}export{xe as default};
